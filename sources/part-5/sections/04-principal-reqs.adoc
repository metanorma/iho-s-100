== Principal Requirements

=== Feature Catalogue

An S-100 based Feature Catalogue presents the abstraction of reality represented
in one or more sets of geographic data as a defined classification of phenomena.
The basic level of classification in the Feature Catalogue is the feature type.
Features and attributes are bound in a Feature Catalogue. The definitions of
features and attributes are drawn from a Feature Concept Dictionary. A Feature
Catalogue shall be available in electronic form (for example XML) for any set of
geographic data that contains features. A Feature Catalogue may also comply with
the specifications of this component of S-100 independently of any existing set
of geographic data.

=== Information Elements

==== Introduction

The following clauses specify general and specific requirements for Feature
Catalogue information elements. A Feature Catalogue generally consists of a list
of named types, a list of properties for named types and the information on how
both are linked together. Furthermore it contains a list of sources for its
definitions. The model is primarily based on the <<ISO19110>> standard but there are
both extensions and differences in this model.

There are two major extensions to the feature types: information types and
complex attributes. To achieve a greater flexibility in modelling the data within
a data set it is necessary to define complex structures of information. Both
extensions allow the creation of those structures. Whereas complex attributes
define complex characteristics for one named type, information types can be
shared.

Unlike feature types, which are an abstraction of real world phenomena,
information types are just shareable structured pieces of information. In a
geographic data set they will be associated to feature types or to other
information types. Both types: feature and information, have many common
characteristics. This is accommodated by deriving both types from a common
abstract base class: the named type.

Complex attributes are an aggregation of other attributes which may be either
simple or complex.

The arrangement of content may be different depending on format, for example
printed document, XML, hypertext etc.

==== Named Types

===== Common Characteristics

Feature and information types are inherited (see <<cls-5-4.2.2.2>> below) from
the abstract class _S100_FC_NamedType_. This class describes all common
characteristics, for example, the name and the definition of the corresponding
type. Furthermore a code has to be defined for the type. This code will later be
used to identify an instance of a named type in a geographic data set. If the
definition is taken from a Feature Concept Dictionary that reference is also
given.

Feature and information types can be derived from other feature or information
types. This includes the possibility that some types are abstract, meaning no
instances of such types can be in a data set. Named types can be characterized by
attributes and additional information may be available by information types that
are related to them. The former is defined by attribute bindings whereas the
latter is achieved by information bindings.

[[cls-5-4.2.2.2]]
===== Inheritance

In data modelling, inheritance is a way to form new types using types that have
already been defined. The new types, known as derived types (or sub-types), take
over (or inherit) properties of the pre-existing types, which are referred to as
base types (or super-types). The derived types may define new additional
properties, but also change existing properties, thelatter is called overriding.
This is used to assign unique property values to sub-types such as name and
definition but overriding of characteristics such as bindings to attributes
should be avoided by only including common characteristics in the super-type. In
the scope of a Feature Catalogue both feature and information types can be
derived from other feature or information types. But a feature type cannot be
derived from an information type or vice versa. Attributes and associations
defined for the super-type will also belong to the sub-type. The definition of
the sub-type is usually redefined. In the context of this standard inheritance
will be always simple, meaning each type cannot be derived from more than one
super-type.

[example]
====
Cardinal and lateral buoys may be derived from an (abstract) type buoy. The
super-type already defines attributes like colour, shape, name, and associations
to lights or top marks. The derived types add special information only valid for
the specialized type like category of cardinal mark or category of lateral mark
respectively.

Inheritance builds hierarchical structures which may become difficult to manage
if they are too complex or not sufficiently mature. It is generally good design
practice to keep the depth of an inheritance tree as shallow as possible. On the
other hand, sometimes inheritance trees simplify models by grouping types which
are derived from the same basic concept and which have the same characteristics,
so inheritance even at multiple levels should be used where appropriate.

Inheritance relationships between types in a Feature Catalogue generally
correspond to inheritance relationships in the Application Schema. Determinations
of when to use inheritance and to what degree and level are information modelling
questions and should be addressed by Application Schema designers and project
teams taking into consideration factors such as Application Schema and Feature
Catalogue complexity, maintenance, application requirements, etc.
====

[example]
In the information model for the ENC Product Specification, all geographic
feature types have information bindings to the information type
_SupplementaryInformation_ and feature bindings to the cartographic feature
_TextAssociation_. Defining a common super-type for all geographic features would
allow these two bindings to be made to the super-type instead of repeating them
in every geographic feature type.

[example]
In an Application Schema for an "Aids to Navigation" Product Specification,
classes defining different types of beacons have many of the same attributes.
Also, classes defining different types of buoys share the same characteristics.
Super-types _GenericBuoy_ and _GenericBeacon_ are therefore defined. Further,
buoys and beacons can all act as structure objects, and there are also other
features which can also play the role of structure objects, so another super-type
is introduced for generic structure features. __AidsToNavigation__,
__StructureObject__, __GenericBuoy__, and _GenericBeacon_ are all abstract
classes. The Structure/Equipment association is made between the classes
Structure and Equipment and applies to all sub-types of these classes, for
example any _CardinalBuoy_ can fill the parent role in a Structure/Equipment
association with any sub-type of Equipment.

[[fig-5-1]]
.Inheritance Example
image::img34.png[]

====== Considerations for Product Specifications (Informative)

In general the need for inheritance increases with increasing numbers of concepts
which can be grouped under a higher-level concept, or as more characteristics are
shared between similar types, or even if several different types share some
characteristics.

The advantage of excluding inheritance from Feature Catalogues is mainly
structural simplification (and consequently simpler processing) since abstract
types and inheritance hierarchies need not be implemented; also in S-100-based
Product Specifications, inherited enumerated attributes can have different lists
of allowed values for different sub-types. The disadvantages include (probable)
increases in the volume of the Feature Catalogue especially if many features or
information types have common attributes or associations, and increased
complexity for maintenance (an update to an attribute nominally bound to a
super-type would have to be made to each sub-type at all levels, and this would
have to be checked before the Feature Catalogue is released). Also, inheritance
is a common paradigm in object-oriented programming and may not be a significant
issue for implementations.

===== Feature Types

Feature types are the basic level of classification in the Feature Catalogue. In
addition to the common characteristics they define a feature use type to
categorize them. Feature types may be associated to other feature types through
feature associations. This will be defined by feature bindings which specify the
association as well as the role used for the relationship to the other feature
type.

===== Information Types

Information types are complex pieces of information in a data set that can be
shared between many other feature or information types. In regards to their
structure, they can also be seen as feature types without a geometric property
which have a structure similar to feature types and are categorized as a separate
item type.

==== Properties

===== Common Characteristics

Properties for feature and information types are attributes and association roles
although the latter only applies to feature types. The common characteristics
include name, definition, remarks etc. A reference to a Feature Concept
Dictionary may be defined.

===== Attributes

Attributes carry the characteristics of feature and information types. Unlike
information types they cannot be shared between different instances. That is, an
instance of an attribute belongs to one and only one feature or information type.
In this standard there are two different kinds of attributes: simple and complex.
Simple attributes carry the value itself, and complex attributes are aggregations
of other attributes to achieve a complex and hierarchical data structure.

===== Simple Attributes

Simple attributes are designed to carry a value. In the Feature Catalogue the
domain of the value shall be specified. All attribute values are value types.
<<Part2a,clause="2a-4.2.9">> contains the full list of value types and their definitions. If the value type is an enumeration, or a codelist of type "open enumeration", a list of
'Listed Values' will be defined. For codelists of type open or closed dictionary,
a URI identifying a "dictionary" (or "vocabulary") will be provided as a
definition.

Furthermore the value domain can be constrained by the following:

. The length of the text;
. A format specification for structured text;
. A numeric range.

Details are in <<app-5-A>>.

===== Complex Attributes

Complex attributes are aggregations of other attributes that are either simple or
complex. The aggregation is defined by means of attribute bindings.

===== Association Roles

An association role describes the nature of the relationship from one feature
type to another feature type in a feature association. In this standard each
association has exactly two roles. Either or both may be a default. The
documentation of Application Schemas must specify the rule used for default
names. Different rules for default names may apply to different associations in
the same Application Schema, but each role shall have an unambiguous name, be it
an explicit role name or a default role name.

==== Feature Associations

Feature associations describe the relationships between feature types. Feature
associations have a name, definition, remarks, code etc. Each association uses
two roles that define the directed use of the relationship. Either or both of the
roles may be a default as described in <<Part3>>.

[example]
Structure -- Equipment is an example of an association with two roles.

[example]
theAuthority -- theContactDetails is an example of an association between classes
Authority and ContactDetails which uses two default roles.

==== Bindings

===== Attribute Bindings

The following use cases for attribute bindings exist:

. Defining the attribute for feature types;
. Defining the attributes for information types;
. Defining the attributes for feature associations;
. Defining the attributes for information associations;
. Defining the aggregation of attributes for a complex attribute.

The binding specifies the target attribute and the Multiplicity of the attribute.
The Multiplicity indicates how many instances of an attribute can be used.
Bindings are used to define whether an attribute is mandatory (1..n) or optional
(0..n). If the Multiplicity allows more than one instance of an attribute a
Boolean flag indicates if the sequence of attributes has a meaning.

If the attribute is a simple attribute with a data type of Enumeration, a list of
permitted values can be specified. An empty list indicates that all values
defined for the attribute in the Feature Catalogue are valid.

[[cls-5-4.2.5.2]]
===== Feature Bindings

The feature binding describes the association between two feature types. Each
feature binding is contained within the type definition for a "source" feature
type in the Feature Catalogue, and describes the relation of a feature type (the
"target") to the source feature type. A feature binding specifies:

* the name of the feature association;
* the target feature type;
* the role of the target feature type in relation to the source feature (the
"role" is the name of the association end at the target);
* the type of association end at the target (ordinary association, aggregation,
or composition); and
* the multiplicity of the target feature type.

[example]
The *TrafficSeparationScheme* feature type is associated to the
*TrafficSeparationSchemeLanePart* feature by the
*_TrafficSeparationSchemeAggregation_* association. This association is an
aggregation and is depicted in the <<fig-5-2>> UML diagram below:

[[fig-5-2]]
.TrafficSeparationSchemeAggregation association between TrafficSeparationScheme and TrafficSeparationSchemeLanePart feature classes
image::img35.png[]

In accordance with UML conventions, the diamond at the TrafficSeparationScheme
end means that TrafficSeparationScheme is the "whole" or "container" in the
association and TrafficSeparationSchemeLanePart is the "part" or "containee". The
feature bindings in the respective feature types in the XML Feature Catalogue are:

In the TrafficSeparationScheme:

[source%unnumbered]
----
<S100FC:featureBinding roleType="{{{*association*}}}">
  <S100FC:multiplicity>
    <S100Base:lower>0</S100Base:lower>
    <S100Base:upper xsi:nil="true" infinite="true"/>
  </S100FC:multiplicity>
  <S100FC:association ref="TrafficSeparationSchemeAggregation"/>
  <S100FC:role ref="consistsOf"/>
  <S100FC:featureType ref="TrafficSeparationSchemeLanePart"/>
</S100FC:featureBinding>
----

In TrafficSeparationSchemeLanePart:

[source%unnumbered]
----
<S100FC:featureBinding roleType="{{{*aggregation*}}}">
  <S100FC:multiplicity>
    <S100Base:lower>0</S100Base:lower>
    <S100Base:upper xsi:nil="false" infinite="false">1</S100Base:upper>
  </S100FC:multiplicity>
  <S100FC:association ref="TrafficSeparationSchemeAggregation"/>
  <S100FC:role ref="componentOf"/>
  <S100FC:featureType ref="TrafficSeparationScheme"/>
</S100FC:featureBinding>
----

Note that data formats may impose constraints on whether bindings are actually
encoded in either of the participating feature instances in datasets.

===== Information Bindings

The information binding describes the association between a feature and
information type or between two information types. Each information binding is
contained within the type definition for a "source" feature or information type
in the Feature Catalogue, and describes the relation of an information type (the
"target") to the source type. An information binding specifies:

* the name of the information association;
* the target information type;
* the role of the target information type in relation to the source feature or
information type (the "role" is the name of the association end at the target);
* the type of association end at the target (ordinary association, aggregation,
or composition); and
* the multiplicity of the target information type.

The structure in the XML Feature Catalogue is similar to the example in
<<cls-5-4.2.5.2>> except that one or both of the types will be an information type and
the XML will be for "informationBinding" instead of "featureBinding".

As for feature bindings, data formats may impose constraints on whether bindings
are actually encoded in either of the participating feature instances in datasets
(for example, that for an information association linking a feature to an
information type, the binding is encoded only in the feature instance and
therefore the Feature Catalogue may not include the binding in the information
type, only in the feature type).

==== Definitions and source references

===== Definition sources

This is a list of source documents for the definitions used in the Feature
Catalogue. They are given with their citation information. Usually the
definitions will come from a Feature Concept Dictionary but other sources are
possible. It is also valid that a definition originates from the Feature
Catalogue; in this case there will be no reference to a definition source.

===== Definition references

This information carries the link to the definition source. It points to a
definition source and defines the place in that source by means of an identifier.
In cases where the source is a Feature Concept Dictionary maintained as a
Register this reference will be the item identifier.

==== Completeness

A template for the representation of feature classification information is
specified in the following model (<<fig-5-A-1>>). A Feature Catalogue prepared
according to this template shall document all of the feature types and
information types found in a given set of geographic data. The Feature Catalogue
shall include identification information as specified. The Feature Catalogue
shall include definitions and descriptions of all feature and information types
contained in the data, including any feature attributes and feature associations
contained in the data that are associated with each feature type. To ensure
predictability and comparability of Feature Catalogue content across different
applications, it is recommended that the Feature Catalogue should include only
the elements specified in the tables shown at <<app-5-A>> below.
