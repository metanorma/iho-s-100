[[cls-16-6]]
== Feature creation or replacement rule

Feature creation and replacement rules create new feature types by
combining characteristics of specified feature types from the input data
products. A feature creation/replacement rule basically transforms a
collection of feature instances in the input stream into one or more
different feature instances in the output stream. The created feature
differs from all the input features, for example by adding properties of
one feature to properties of another feature.

Since new feature types must be defined in a Feature Catalogue for ECDIS
use, there is also a "hybrid" Feature Catalogue that contains feature type
specifications for all the possible feature types which can be thus
generated by rules in an Interoperability Catalogue. Similarly, the hybrid
Portrayal Catalogue describes the portrayal of these feature types.

The process for applying such rules is illustrated in <<fig-16-5>> below.

[[fig-16-5]]
.General process for feature creation and replacement rules
image::img195.png[]

A hypothetical example of the operation of such a rule is depicted in
<<fig-16-6>> below. On the left are two hypothetical input features:

* Feature instance DRGARE_12345 from a chart layer, an instance of feature
type DredgedArea. Its geometry is an area, depicted alongside.
* Feature instance AISMessage_8472 from a met/hydro layer, an instance of
feature type MetHydroDataAISMessage. Its geometry is a point, depicted
alongside.

The operation of the rule results in two feature instances, described in
<<tab-16-20>> below:

[[tab-16-20]]
.Features resulting from operation of hypothetical rule
[cols="a,a,a,a,a",options=header]
|===
| Output feature instance | Output feature Type | Defined in Feature Catalogue | Spatial attributes | Thematic attributes

| RTWL_H01
| RealTimeWaterLevelArea
| Hybrid FC IHOICFC01.XML
| Circle centred at location of input AISMessage_8472
| Combination of DRGARE_12345 and AISMessage_8472

| DRGARE_H01
| DredgedArea
| Chart FC
| Spatial difference of original DRGARE_12345 and circle geometry of RTWLArea_H01
| Same as DRGARE_12345
|===

[[fig-16-6]]
.Illustrative example of a creation/replacement rule
image::img196.png[]
